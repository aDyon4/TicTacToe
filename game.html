<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="icon" type="image/x-icon" href="https://media.istockphoto.com/id/1279358029/vector/letter-d-logo-lettermark-dd-monogram-typeface-type-emblem-character-trademark.jpg?s=612x612&w=0&k=20&c=nSNB2jgnlw4VN4PFS8oZ23olqDJZOZba1lbGAoipwsc=">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Double D - TicTacToe</title>
</head>
<body>
    
<img id='uu' src="https://bluesky-cogcms.cdn.imgeng.in/media/37782/rs6avant.png" alt="">

<header>
    <span id='gg1' onclick="page('rules')">Szabályok</span>
    <span id='gg2' onclick="page('game')">Játék</span>
    <span id='gg3' onclick="page('developers')">Rólunk</span>
</header>

<div class="rules" id='rulesPage'>

    <div class="container" id='nemtom'>
        <h2>Üdvözlünk a Double D nevezetű játék főoldalán!</h2>
        <h3>Merülj el az amőbázás világába , már online is!</h3>
        <h5>Hívj ki valakit egy megmérettetésre , mutasd meg ki az amőba királya!</h5>
        <div class="szabalyok">
            <h2>Szabályok :</h2>
            <ul>
                <li>Az amőbát két játékos játssza egy négyzethálós játéktéren.</li>
                <li>A játékosok felváltva helyezik el bábuikat, a még üres négyzetek valamelyikébe.</li>
                <li>Az a játékos nyer, aki előbb el tud helyezni 5 saját bábút egy vonalra eső szomszédos négyzetekben.</li>
                <li>Másképpen fogalmazva, az a játékos nyer, aki elhelyez egymás mellett 3 bábút vízszintesen vagy függőlegesen vagy a két átlós irány valamelyikében.</li>
                <li>Nagyon ritka esetben döntetlen is előfordulhat, ha a pálya betelik és egyik játékos sem alakított ki 3 egymás melletti bábut.</li>
            </ul>
        </div>
        
    </div>

</div>

<div class="developers" id='developersPage'>

    <div class="container" id="nemtom">
        <h1>Fejlesztők</h1>
        <div class="us">
            <span>Ádám Dominik: </span>
            <span>Kódolás, Kivitelezés</span>
            <br>
            <span>Csősz Dominik: </span>
            <span>Dizájn, Szöveg alkotás</span>
        </div>
        
        <br>
        <a href="https://github.com/aDyon4/TicTacToe" class="fa fa-github" target="blank"> github</a>
    </div>

</div>

<div class="game" id='gamePage'>

    <div class="container" id="nemtom">

        <div class="counter">
            <span id="score"></span><br>
            <p class="plyr" id='player1'></p>
            <p class="plyr" id='player2'></p>
        </div>

        <div id='dd' >
            <span>Következő: </span> 
            <span id="fdP"></span>
            <img src="" id="fdI" alt="">
        </div>

        <div class="kozep">
            <div class='asd' id='ff'>
                <span id='restart' onclick="newGame()">Kezdés</span>
            </div>
            <div class="row place" id='mittomen'>       
                <div class="left col-lg-4 col-sm-4">
                    <div class="blocks" id='block00' onclick='valaszt(0, 0)'>  </div>
                    <div class="blocks" id='block01' onclick='valaszt(0, 1)'>  </div>
                    <div class="blocks" id='block02' onclick='valaszt(0, 2)'>  </div>
                </div>
                <div class="center col-lg-4 col-sm-4">
                    <div class="blocks" id='block10' onclick='valaszt(1, 0)'>  </div>
                    <div class="blocks" id='block11' onclick='valaszt(1, 1)'>  </div>
                    <div class="blocks" id='block12' onclick='valaszt(1, 2)'>  </div>
                </div>
                <div class="right col-lg-4 col-sm-4">
                    <div class="blocks" id='block20' onclick='valaszt(2, 0)'>  </div>
                    <div class="blocks" id='block21' onclick='valaszt(2, 1)'>  </div>
                    <div class="blocks" id='block22' onclick='valaszt(2, 2)'>  </div>
                </div>
            </div>
        </div>

        <div class="info">   
            <input type="text" id="name1" value="" placeholder='Első játékos neve (O)'>
            <input type="text" id="name2" value="" placeholder='Második játékos neve (X)'>
            <br>
            <input type="submit" value="ok" id="ok" onclick="ok()">
            <p></p> 
            <a href=""><span id="rstrt" onclick="restartGame()">Új játék</span><i></i></a>
        </div>

    </div>

</div>


</body>
</html>


<script>

    function page(name){
        if(name == 'game'){
            document.getElementById('rulesPage').style.display = 'none';  
            document.getElementById('gamePage').style.display = 'block';
            document.getElementById('developersPage').style.display = 'none';
        }
        else if(name == 'rules'){
            document.getElementById('rulesPage').style.display = 'block';
            document.getElementById('gamePage').style.display = 'none'; 
            document.getElementById('developersPage').style.display = 'none';
        }
        else if(name == 'developers'){
            document.getElementById('rulesPage').style.display = 'none'; 
            document.getElementById('gamePage').style.display = 'none';
            document.getElementById('developersPage').style.display = 'block';
        }
    }

    // Változók
    let palya = [['.','.','.'],['.','.','.'],['.','.','.']];
    let kx = 0;
    let whichImage = '';
    let player1 = 'player1';
    let player2 = 'player2';
    let plyr1Score = 0;
    let plyr2Score = 0;
    let mm = 0;
    
    function ok(){
        player1 = document.getElementById('name1').value;
        player2 = document.getElementById('name2').value;
        document.getElementById('name1').disabled = true;
        document.getElementById('name2').disabled = true;
        document.getElementById('ok').style.backgroundColor = 'rgb(255,0,0)';
    }


    function newGame(){
        // Játékosok nevei
        //player1 = document.getElementById('name1').value
        //player2 = document.getElementById('name2').value
        // Alaphelyzetbe állítja a pálya tömbjét
        palya = [['.','.','.'],['.','.','.'],['.','.','.']];
        console.log(palya);
        // Hátra küldi a kezdő képet
        document.getElementById('score').innerHTML = '';
        document.getElementById('restart').innerHTML = '';
        document.getElementById('ff').style.zIndex = -1;
        document.getElementById('ff').style.backgroundColor = 'rgb(49,49,49)';
        document.getElementById('mittomen').style.filter = 'blur(0)';
        // Lenullázza a pályát a képernyőn
        for(let i = 0;i<3;i++){
            for(let j = 0; j<3;j++) {
                document.getElementById('block'+i+j).innerHTML = '';
            }
        }
        mm = 0;
    }
    function restartGame(){
        document.getElementById('rulesPage').style.display = 'none';  
        document.getElementById('gamePage').style.display = 'block';
        document.getElementById('developersPage').style.display = 'none';
        // Alaphelyzetbe állítja a játékosok adatait
        plyr1Score = 0; document.getElementById('player1').innerHTML = '';
        plyr2Score = 0; document.getElementById('player2').innerHTML = '';
        player1 = document.getElementById('name1').value = ''; player2 = document.getElementById('name2').value = '';
        // Kezdő kép
        document.getElementById('score').innerHTML = '';
        document.getElementById('restart').innerHTML = 'Kezdés';
        document.getElementById('ff').style.zIndex = 1;
        document.getElementById('ff').style.backgroundColor = "rgba(0, 255, 0, 0.144)";
        mm = 0;
        document.getElementById('name1').disabled = false;
        document.getElementById('name2').disabled = false;
        document.getElementById('ok').style.backgroundColor = 'rgb(0,255,0)';
    }
    
    function valaszt(sor, oszlop){
        // Hova teszik az 'O'-t és az 'X'-et
        if(palya[oszlop][sor] == '.'){
            if(kx==0){
                palya[oszlop][sor] = 'O';
                document.getElementById('block'+sor+oszlop).innerHTML = "<img src='https://qph.cf2.quoracdn.net/main-qimg-dad012c55e364dd6fd10bd27e332741d'>"; // Kör
                document.getElementById('fdP').innerHTML = player1;
                document.getElementById('fdI').src = 'https://cdn-icons-png.flaticon.com/512/75/75519.png';
                kx = 1;
                mm++;
            }
            else {
                palya[oszlop][sor] = 'X';
                document.getElementById('block'+sor+oszlop).innerHTML = "<img src='https://cdn-icons-png.flaticon.com/512/75/75519.png'>"; // X
                document.getElementById('fdP').innerHTML = player2;
                document.getElementById('fdI').src = 'https://qph.cf2.quoracdn.net/main-qimg-dad012c55e364dd6fd10bd27e332741d';
                kx = 0;
                mm++;
            }
        }  
        //console.log(palya);
        // Nyerő kombinációk tömbje
        const nyero_kombinaciok = [
            // Oszlopok
            [0, 1, 2], 
            [10, 11, 12],
            [20, 21, 22],
            // Sorok
            [0, 10, 20],
            [1, 11, 21],
            [2, 21, 22],
            // Átló
            [0, 11, 22],
            [2, 11, 20]
        ];

        let jelek;
        let jelek2;
        
        // Nyertes 
        if(mm==9) {
            document.getElementById('score').innerHTML = 'Döntetlen';
            document.getElementById('restart').innerHTML = 'Új kör';
            document.getElementById('ff').style.zIndex = 1;
            document.getElementById('ff').style.backgroundColor = "rgba(0, 255, 0, 0.144)";

        }
        for (let i = 0; i < nyero_kombinaciok.length; i++) {
            let kombinacio = nyero_kombinaciok[i];

            for (let a = 0; a < 3; a++) {  
                // Oszlopok
                jelek = kombinacio.map(pos => palya[pos % 3][Math.floor(pos / 3)+a]); 
               
                // Átlók
                let jelek3, jelek4, jelek5, jelek6, jelek7;
                if(kombinacio.includes(0) && kombinacio.includes(11) && kombinacio.includes(22)){
                    jelek3 = [palya[0][0], palya[1][1], palya[2][2]];
                    jelek4 = [palya[0][2], palya[1][1], palya[2][0]];
                }
                
                if(kombinacio.includes(0) && kombinacio.includes(1) && kombinacio.includes(2)){ jelek5 = [palya[0][0], palya[0][1], palya[0][2]]; }
                if(kombinacio.includes(10) && kombinacio.includes(11) && kombinacio.includes(12)){ jelek5 = [palya[1][0], palya[1][1], palya[1][2]]; }
                if(kombinacio.includes(20) && kombinacio.includes(21) && kombinacio.includes(22)){ jelek5 = [palya[2][0], palya[2][1], palya[2][2]]; }
                console.log(': ',jelek5);

                // Ha 'O' nyer
                if (jelek.every(jel => jel === 'O')  || (jelek3 && jelek3.every(jel => jel === 'O')) || (jelek4 && jelek4.every(jel => jel === 'O')) || (jelek5 && jelek5.every(jel => jel === 'O'))) {
                    plyr1Score++;
                    win('player1', player1, plyr1Score);
                    break;
                } 
                // Ha 'X' nyer
                else if (jelek.every(jel => jel === 'X') || (jelek3 && jelek3.every(jel => jel === 'X')) || (jelek4 && jelek4.every(jel => jel === 'X')) || (jelek5 && jelek5.every(jel => jel === 'X'))) {
                    plyr2Score++;
                    win('player2', player2, plyr2Score);
                    break;
                }
            }
        }
        
    }
    function win(asd, player, plyrScore){
        document.getElementById('score').innerHTML = player + ' nyert!';
        document.getElementById(asd).innerHTML =  player + ' : ' + plyrScore + ' pont';
        document.getElementById('restart').innerHTML = 'Új kör';
        document.getElementById('ff').style.zIndex = 1;
        document.getElementById('ff').style.backgroundColor = "rgba(0, 255, 0, 0.144)";
        document.getElementById('mittomen').style.filter = 'blur(5px)';
    }
    
</script>